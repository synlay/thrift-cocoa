Added changes from Thrift commits up to a2123693838410c1e78170419e9bb91cb01151b4
